!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(e,a,c){"use strict";c.r(a),c.d(a,"TrainingModule",(function(){return ut}));var i=c("PCNd"),r=c("tyNb"),o=c("vQgB"),s=c("fXoL"),b=c("vEl1"),u=c("l7P3"),l=c("ofXK"),f=c("wZkO"),m=c("a318"),p=c("CqG3"),d=c("Kehh"),g=c("XiUz"),h=c("3Pt+"),y=c("Wp6s"),v=c("kmnG"),S=c("d3UM"),R=c("FKr1"),x=c("Xa2L"),w=c("bTqV");function z(t,e){if(1&t&&(s.Sb(0,"mat-option",9),s.zc(1),s.Rb()),2&t){var n=e.$implicit;s.jc("value",n.id),s.Bb(1),s.Bc(" ",n.name," ")}}function C(t,e){if(1&t&&(s.Sb(0,"mat-form-field"),s.Sb(1,"mat-select",7),s.yc(2,z,2,2,"mat-option",8),s.fc(3,"async"),s.Rb(),s.Rb()),2&t){var n=s.ec();s.Bb(2),s.jc("ngForOf",s.gc(3,1,n.exercises$))}}function k(t,e){1&t&&s.Nb(0,"mat-spinner")}function B(t,e){if(1&t&&(s.Sb(0,"button",12),s.zc(1,"Start"),s.Rb()),2&t){s.ec(2);var n=s.oc(2);s.jc("disabled",n.invalid)}}function I(t,e){if(1&t){var n=s.Tb();s.Sb(0,"button",13),s.ac("click",(function(){return s.qc(n),s.ec(2).fetchExercise()})),s.zc(1,"Fetch again"),s.Rb()}}function j(t,e){if(1&t&&(s.Sb(0,"mat-card-actions",4),s.yc(1,B,2,1,"button",10),s.fc(2,"async"),s.yc(3,I,2,0,"button",11),s.fc(4,"async"),s.Rb()),2&t){var n=s.ec();s.Bb(1),s.jc("ngIf",s.gc(2,2,n.exercises$)),s.Bb(2),s.jc("ngIf",!s.gc(4,4,n.exercises$))}}var D,M=((D=function(){function e(n,a,c,i){t(this,e),this.trainingService=n,this.db=a,this.uiService=c,this.store=i}return n(e,[{key:"ngOnInit",value:function(){this.isLoaded$=this.store.select(m.b),this.exercises$=this.store.select(o.b),this.fetchExercise()}},{key:"onStartTraining",value:function(t){this.trainingService.startExercise(t.value.exercise)}},{key:"fetchExercise",value:function(){this.trainingService.fetchAvailableExercises()}}]),e}()).\u0275fac=function(t){return new(t||D)(s.Mb(b.a),s.Mb(p.AngularFirestore),s.Mb(d.a),s.Mb(u.a))},D.\u0275cmp=s.Gb({type:D,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px",1,"mat-elevation-z8"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(t,e){if(1&t){var n=s.Tb();s.Sb(0,"section",0),s.Sb(1,"form",1,2),s.ac("ngSubmit",(function(){s.qc(n);var t=s.oc(2);return e.onStartTraining(t)})),s.Sb(3,"mat-card",3),s.Sb(4,"mat-card-title",4),s.zc(5,"Time to start a workout!"),s.Rb(),s.Sb(6,"mat-card-content",4),s.yc(7,C,4,3,"mat-form-field",5),s.fc(8,"async"),s.fc(9,"async"),s.yc(10,k,1,0,"mat-spinner",5),s.fc(11,"async"),s.Rb(),s.yc(12,j,5,6,"mat-card-actions",6),s.fc(13,"async"),s.Rb(),s.Rb(),s.Rb()}2&t&&(s.Bb(7),s.jc("ngIf",s.gc(8,3,!s.gc(9,5,e.isLoaded$)&&e.exercises$)),s.Bb(3),s.jc("ngIf",s.gc(11,7,e.isLoaded$)),s.Bb(2),s.jc("ngIf",!s.gc(13,9,e.isLoaded$)))},directives:[g.c,g.b,h.t,h.n,h.o,y.a,g.a,y.e,y.c,l.m,v.c,S.a,h.m,h.p,h.r,l.l,R.n,x.c,y.b,w.a],pipes:[l.b],styles:[".new-training[_ngcontent-%COMP%]{padding:40px}"]}),D),$=c("+0xr"),O=c("Dh3D"),F=c("M9IT"),T=c("qFsG");function A(t,e){1&t&&(s.Sb(0,"mat-header-cell",14),s.zc(1,"Date"),s.Rb())}function E(t,e){if(1&t&&(s.Sb(0,"mat-cell"),s.zc(1),s.fc(2,"date"),s.Rb()),2&t){var n=e.$implicit;s.Bb(1),s.Ac(s.gc(2,1,n.date.toDate()))}}function L(t,e){1&t&&(s.Sb(0,"mat-header-cell",14),s.zc(1,"Name"),s.Rb())}function N(t,e){if(1&t&&(s.Sb(0,"mat-cell"),s.zc(1),s.Rb()),2&t){var n=e.$implicit;s.Bb(1),s.Ac(n.name)}}function P(t,e){1&t&&(s.Sb(0,"mat-header-cell",14),s.zc(1,"Calories"),s.Rb())}function G(t,e){if(1&t&&(s.Sb(0,"mat-cell"),s.zc(1),s.fc(2,"number"),s.Rb()),2&t){var n=e.$implicit;s.Bb(1),s.Ac(s.gc(2,1,n.calories))}}function K(t,e){1&t&&(s.Sb(0,"mat-header-cell",14),s.zc(1,"Duration"),s.Rb())}function Q(t,e){if(1&t&&(s.Sb(0,"mat-cell"),s.zc(1),s.fc(2,"number"),s.Rb()),2&t){var n=e.$implicit;s.Bb(1),s.Ac(s.gc(2,1,n.duration))}}function q(t,e){1&t&&(s.Sb(0,"mat-header-cell",14),s.zc(1,"State"),s.Rb())}function J(t,e){if(1&t&&(s.Sb(0,"mat-cell"),s.zc(1),s.Rb()),2&t){var n=e.$implicit;s.Bb(1),s.Ac(n.state)}}function X(t,e){1&t&&s.Nb(0,"mat-header-row")}function H(t,e){1&t&&s.Nb(0,"mat-row")}var U,V,Y,_=function(){return[5,10,20]},W=((U=function(){function e(n,a){t(this,e),this.trainingService=n,this.store=a,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new $.k}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.store.select(o.c).subscribe((function(e){t.dataSource.data=e})),this.trainingService.fetchCompletedOrCancelledExercise()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"doFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),e}()).\u0275fac=function(t){return new(t||U)(s.Mb(b.a),s.Mb(u.a))},U.\u0275cmp=s.Gb({type:U,selectors:[["app-past-training"]],viewQuery:function(t,e){var n;1&t&&(s.Cc(O.a,!0),s.Cc(F.a,!0)),2&t&&(s.nc(n=s.bc())&&(e.sort=n.first),s.nc(n=s.bc())&&(e.paginator=n.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"mat-form-field",1),s.Sb(2,"input",2),s.ac("keyup",(function(t){return e.doFilter(t.target.value)})),s.Rb(),s.Rb(),s.Rb(),s.Sb(3,"mat-table",3),s.Qb(4,4),s.yc(5,A,2,0,"mat-header-cell",5),s.yc(6,E,3,3,"mat-cell",6),s.Pb(),s.Qb(7,7),s.yc(8,L,2,0,"mat-header-cell",5),s.yc(9,N,2,1,"mat-cell",6),s.Pb(),s.Qb(10,8),s.yc(11,P,2,0,"mat-header-cell",5),s.yc(12,G,3,3,"mat-cell",6),s.Pb(),s.Qb(13,9),s.yc(14,K,2,0,"mat-header-cell",5),s.yc(15,Q,3,3,"mat-cell",6),s.Pb(),s.Qb(16,10),s.yc(17,q,2,0,"mat-header-cell",5),s.yc(18,J,2,1,"mat-cell",6),s.Pb(),s.yc(19,X,1,0,"mat-header-row",11),s.yc(20,H,1,0,"mat-row",12),s.Rb(),s.Nb(21,"mat-paginator",13)),2&t&&(s.Bb(3),s.jc("dataSource",e.dataSource),s.Bb(16),s.jc("matHeaderRowDef",e.displayedColumns),s.Bb(1),s.jc("matRowDefColumns",e.displayedColumns),s.Bb(1),s.jc("pageSize",1)("pageSizeOptions",s.kc(5,_)))},directives:[g.b,v.c,g.a,T.b,$.j,O.a,$.c,$.e,$.b,$.g,$.i,F.a,$.d,O.b,$.a,$.f,$.h],pipes:[l.e,l.f],styles:[""]}),U),Z=c("0IaG"),tt=((V=function e(n){t(this,e),this.passedData=n}).\u0275fac=function(t){return new(t||V)(s.Mb(Z.a))},V.\u0275cmp=s.Gb({type:V,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-raised-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(s.Sb(0,"h1",0),s.zc(1,"Are you sure?"),s.Rb(),s.Sb(2,"mat-dialog-content"),s.Sb(3,"p"),s.zc(4),s.Rb(),s.Rb(),s.Sb(5,"mat-dialog-actions"),s.Sb(6,"button",1),s.zc(7,"Yes"),s.Rb(),s.Sb(8,"button",1),s.zc(9,"No"),s.Rb(),s.Rb()),2&t&&(s.Bb(4),s.Bc("You already got ",e.passedData.progress,"%"),s.Bb(2),s.jc("mat-dialog-close",!0),s.Bb(2),s.jc("mat-dialog-close",!1))},directives:[Z.g,Z.e,Z.c,w.a,Z.d],encapsulation:2}),V),et=c("IzEk"),nt=((Y=function(){function e(n,a,c){t(this,e),this.dialog=n,this.trainingService=a,this.store=c,this.progress=0}return n(e,[{key:"ngOnInit",value:function(){this.startOrResumeTimer()}},{key:"startOrResumeTimer",value:function(){var t=this;this.store.select(o.a).pipe(Object(et.a)(1)).subscribe((function(e){t.timer=setInterval((function(){t.progress=t.progress+1,t.progress>=100&&(t.trainingService.completeExercise(),clearInterval(t.timer))}),e.duration/100*1e3)}))}},{key:"onStop",value:function(){var t=this;clearInterval(this.timer),this.dialog.open(tt,{data:{progress:this.progress}}).afterClosed().subscribe((function(e){e?t.trainingService.cancelExercise(t.progress):t.startOrResumeTimer()}))}}]),e}()).\u0275fac=function(t){return new(t||Y)(s.Mb(Z.b),s.Mb(b.a),s.Mb(u.a))},Y.\u0275cmp=s.Gb({type:Y,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(s.Sb(0,"section",0),s.Nb(1,"mat-progress-spinner",1),s.Sb(2,"h1"),s.zc(3),s.Rb(),s.Sb(4,"p"),s.zc(5,"Keep on going you can do it!"),s.Rb(),s.Sb(6,"button",2),s.ac("click",(function(){return e.onStop()})),s.zc(7,"Stop"),s.Rb(),s.Rb()),2&t&&(s.Bb(1),s.jc("value",e.progress),s.Bb(2),s.Bc("",e.progress,"%"))},directives:[g.c,g.b,x.a,w.a],styles:[".current-training[_ngcontent-%COMP%]{padding:40px}"]}),Y);function at(t,e){1&t&&(s.Sb(0,"mat-tab-group"),s.Sb(1,"mat-tab",1),s.Nb(2,"app-new-training"),s.Rb(),s.Sb(3,"mat-tab",2),s.Nb(4,"app-past-training"),s.Rb(),s.Rb())}function ct(t,e){1&t&&s.Nb(0,"app-current-training")}var it,rt,ot,st=[{path:"",component:(it=function(){function e(n,a){t(this,e),this.trainingService=n,this.store=a}return n(e,[{key:"ngOnInit",value:function(){this.ongoingTraining$=this.store.select(o.d)}}]),e}(),it.\u0275fac=function(t){return new(t||it)(s.Mb(b.a),s.Mb(u.a))},it.\u0275cmp=s.Gb({type:it,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(t,e){1&t&&(s.yc(0,at,5,0,"mat-tab-group",0),s.fc(1,"async"),s.yc(2,ct,1,0,"app-current-training",0),s.fc(3,"async")),2&t&&(s.jc("ngIf",!s.gc(1,2,e.ongoingTraining$)),s.Bb(2),s.jc("ngIf",s.gc(3,4,e.ongoingTraining$)))},directives:[l.m,f.b,f.a,M,W,nt],pipes:[l.b],styles:[""]}),it)}],bt=((ot=function e(){t(this,e)}).\u0275mod=s.Kb({type:ot}),ot.\u0275inj=s.Jb({factory:function(t){return new(t||ot)},imports:[[r.c.forChild(st)],r.c]}),ot),ut=((rt=function e(){t(this,e)}).\u0275mod=s.Kb({type:rt}),rt.\u0275inj=s.Jb({factory:function(t){return new(t||rt)},imports:[[i.a,bt,u.b.forFeature("training",o.e)]]}),rt)}}])}();