(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,c){"use strict";c.r(e),c.d(e,"TrainingModule",(function(){return et}));var n=c("PCNd"),a=c("tyNb"),i=c("vQgB"),r=c("fXoL"),s=c("vEl1"),o=c("l7P3"),b=c("ofXK"),l=c("wZkO"),u=c("a318"),m=c("CqG3"),f=c("Kehh"),p=c("XiUz"),d=c("3Pt+"),g=c("Wp6s"),h=c("kmnG"),S=c("d3UM"),y=c("FKr1"),R=c("Xa2L"),v=c("bTqV");function x(t,e){if(1&t&&(r.Sb(0,"mat-option",9),r.zc(1),r.Rb()),2&t){const t=e.$implicit;r.jc("value",t.id),r.Bb(1),r.Bc(" ",t.name," ")}}function w(t,e){if(1&t&&(r.Sb(0,"mat-form-field"),r.Sb(1,"mat-select",7),r.yc(2,x,2,2,"mat-option",8),r.fc(3,"async"),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(2),r.jc("ngForOf",r.gc(3,1,t.exercises$))}}function z(t,e){1&t&&r.Nb(0,"mat-spinner")}function B(t,e){if(1&t&&(r.Sb(0,"button",12),r.zc(1,"Start"),r.Rb()),2&t){r.ec(2);const t=r.oc(2);r.jc("disabled",t.invalid)}}function C(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",13),r.ac("click",(function(){return r.qc(t),r.ec(2).fetchExercise()})),r.zc(1,"Fetch again"),r.Rb()}}function I(t,e){if(1&t&&(r.Sb(0,"mat-card-actions",4),r.yc(1,B,2,1,"button",10),r.fc(2,"async"),r.yc(3,C,2,0,"button",11),r.fc(4,"async"),r.Rb()),2&t){const t=r.ec();r.Bb(1),r.jc("ngIf",r.gc(2,2,t.exercises$)),r.Bb(2),r.jc("ngIf",!r.gc(4,4,t.exercises$))}}let j=(()=>{class t{constructor(t,e,c,n){this.trainingService=t,this.db=e,this.uiService=c,this.store=n}ngOnInit(){this.isLoaded$=this.store.select(u.b),this.exercises$=this.store.select(i.b),this.fetchExercise()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}fetchExercise(){this.trainingService.fetchAvailableExercises()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s.a),r.Mb(m.AngularFirestore),r.Mb(f.a),r.Mb(o.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px",1,"mat-elevation-z8"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(t,e){if(1&t){const t=r.Tb();r.Sb(0,"section",0),r.Sb(1,"form",1,2),r.ac("ngSubmit",(function(){r.qc(t);const c=r.oc(2);return e.onStartTraining(c)})),r.Sb(3,"mat-card",3),r.Sb(4,"mat-card-title",4),r.zc(5,"Time to start a workout!"),r.Rb(),r.Sb(6,"mat-card-content",4),r.yc(7,w,4,3,"mat-form-field",5),r.fc(8,"async"),r.fc(9,"async"),r.yc(10,z,1,0,"mat-spinner",5),r.fc(11,"async"),r.Rb(),r.yc(12,I,5,6,"mat-card-actions",6),r.fc(13,"async"),r.Rb(),r.Rb(),r.Rb()}2&t&&(r.Bb(7),r.jc("ngIf",r.gc(8,3,!r.gc(9,5,e.isLoaded$)&&e.exercises$)),r.Bb(3),r.jc("ngIf",r.gc(11,7,e.isLoaded$)),r.Bb(2),r.jc("ngIf",!r.gc(13,9,e.isLoaded$)))},directives:[p.c,p.b,d.t,d.n,d.o,g.a,p.a,g.e,g.c,b.m,h.c,S.a,d.m,d.p,d.r,b.l,y.n,R.c,g.b,v.a],pipes:[b.b],styles:[".new-training[_ngcontent-%COMP%]{padding:40px}"]}),t})();var D=c("+0xr"),M=c("Dh3D"),$=c("M9IT"),O=c("qFsG");function k(t,e){1&t&&(r.Sb(0,"mat-header-cell",14),r.zc(1,"Date"),r.Rb())}function F(t,e){if(1&t&&(r.Sb(0,"mat-cell"),r.zc(1),r.fc(2,"date"),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(r.gc(2,1,t.date.toDate()))}}function A(t,e){1&t&&(r.Sb(0,"mat-header-cell",14),r.zc(1,"Name"),r.Rb())}function L(t,e){if(1&t&&(r.Sb(0,"mat-cell"),r.zc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(t.name)}}function T(t,e){1&t&&(r.Sb(0,"mat-header-cell",14),r.zc(1,"Calories"),r.Rb())}function E(t,e){if(1&t&&(r.Sb(0,"mat-cell"),r.zc(1),r.fc(2,"number"),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(r.gc(2,1,t.calories))}}function N(t,e){1&t&&(r.Sb(0,"mat-header-cell",14),r.zc(1,"Duration"),r.Rb())}function P(t,e){if(1&t&&(r.Sb(0,"mat-cell"),r.zc(1),r.fc(2,"number"),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(r.gc(2,1,t.duration))}}function G(t,e){1&t&&(r.Sb(0,"mat-header-cell",14),r.zc(1,"State"),r.Rb())}function K(t,e){if(1&t&&(r.Sb(0,"mat-cell"),r.zc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ac(t.state)}}function Q(t,e){1&t&&r.Nb(0,"mat-header-row")}function q(t,e){1&t&&r.Nb(0,"mat-row")}const J=function(){return[5,10,20]};let X=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new D.k}ngOnInit(){this.store.select(i.c).subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelledExercise()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s.a),r.Mb(o.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-past-training"]],viewQuery:function(t,e){var c;1&t&&(r.Cc(M.a,!0),r.Cc($.a,!0)),2&t&&(r.nc(c=r.bc())&&(e.sort=c.first),r.nc(c=r.bc())&&(e.paginator=c.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"mat-form-field",1),r.Sb(2,"input",2),r.ac("keyup",(function(t){return e.doFilter(t.target.value)})),r.Rb(),r.Rb(),r.Rb(),r.Sb(3,"mat-table",3),r.Qb(4,4),r.yc(5,k,2,0,"mat-header-cell",5),r.yc(6,F,3,3,"mat-cell",6),r.Pb(),r.Qb(7,7),r.yc(8,A,2,0,"mat-header-cell",5),r.yc(9,L,2,1,"mat-cell",6),r.Pb(),r.Qb(10,8),r.yc(11,T,2,0,"mat-header-cell",5),r.yc(12,E,3,3,"mat-cell",6),r.Pb(),r.Qb(13,9),r.yc(14,N,2,0,"mat-header-cell",5),r.yc(15,P,3,3,"mat-cell",6),r.Pb(),r.Qb(16,10),r.yc(17,G,2,0,"mat-header-cell",5),r.yc(18,K,2,1,"mat-cell",6),r.Pb(),r.yc(19,Q,1,0,"mat-header-row",11),r.yc(20,q,1,0,"mat-row",12),r.Rb(),r.Nb(21,"mat-paginator",13)),2&t&&(r.Bb(3),r.jc("dataSource",e.dataSource),r.Bb(16),r.jc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.jc("matRowDefColumns",e.displayedColumns),r.Bb(1),r.jc("pageSize",1)("pageSizeOptions",r.kc(5,J)))},directives:[p.b,h.c,p.a,O.b,D.j,M.a,D.c,D.e,D.b,D.g,D.i,$.a,D.d,M.b,D.a,D.f,D.h],pipes:[b.e,b.f],styles:[""]}),t})();var H=c("0IaG");let U=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(H.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-raised-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(r.Sb(0,"h1",0),r.zc(1,"Are you sure?"),r.Rb(),r.Sb(2,"mat-dialog-content"),r.Sb(3,"p"),r.zc(4),r.Rb(),r.Rb(),r.Sb(5,"mat-dialog-actions"),r.Sb(6,"button",1),r.zc(7,"Yes"),r.Rb(),r.Sb(8,"button",1),r.zc(9,"No"),r.Rb(),r.Rb()),2&t&&(r.Bb(4),r.Bc("You already got ",e.passedData.progress,"%"),r.Bb(2),r.jc("mat-dialog-close",!0),r.Bb(2),r.jc("mat-dialog-close",!1))},directives:[H.g,H.e,H.c,v.a,H.d],encapsulation:2}),t})();var V=c("IzEk");let Y=(()=>{class t{constructor(t,e,c){this.dialog=t,this.trainingService=e,this.store=c,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){this.store.select(i.a).pipe(Object(V.a)(1)).subscribe(t=>{this.timer=setInterval(()=>{this.progress=this.progress+1,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t.duration/100*1e3)})}onStop(){clearInterval(this.timer),this.dialog.open(U,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(H.b),r.Mb(s.a),r.Mb(o.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"section",0),r.Nb(1,"mat-progress-spinner",1),r.Sb(2,"h1"),r.zc(3),r.Rb(),r.Sb(4,"p"),r.zc(5,"Keep on going you can do it!"),r.Rb(),r.Sb(6,"button",2),r.ac("click",(function(){return e.onStop()})),r.zc(7,"Stop"),r.Rb(),r.Rb()),2&t&&(r.Bb(1),r.jc("value",e.progress),r.Bb(2),r.Bc("",e.progress,"%"))},directives:[p.c,p.b,R.a,v.a],styles:[".current-training[_ngcontent-%COMP%]{padding:40px}"]}),t})();function _(t,e){1&t&&(r.Sb(0,"mat-tab-group"),r.Sb(1,"mat-tab",1),r.Nb(2,"app-new-training"),r.Rb(),r.Sb(3,"mat-tab",2),r.Nb(4,"app-past-training"),r.Rb(),r.Rb())}function W(t,e){1&t&&r.Nb(0,"app-current-training")}const Z=[{path:"",component:(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e}ngOnInit(){this.ongoingTraining$=this.store.select(i.d)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s.a),r.Mb(o.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(t,e){1&t&&(r.yc(0,_,5,0,"mat-tab-group",0),r.fc(1,"async"),r.yc(2,W,1,0,"app-current-training",0),r.fc(3,"async")),2&t&&(r.jc("ngIf",!r.gc(1,2,e.ongoingTraining$)),r.Bb(2),r.jc("ngIf",r.gc(3,4,e.ongoingTraining$)))},directives:[b.m,l.b,l.a,j,X,Y],pipes:[b.b],styles:[""]}),t})()}];let tt=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[a.c.forChild(Z)],a.c]}),t})(),et=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[n.a,tt,o.b.forFeature("training",i.e)]]}),t})()}}]);